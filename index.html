<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLER Visual Lab - Test de Rendimiento</title>
    <style>
        body { font-family: monospace; background: #ffffff; color: #000; padding: 40px; line-height: 1.2; }
        .container { max-width: 900px; margin: 0 auto; border: 1px solid #eee; padding: 20px; }
        #displayBox { 
            width: 100%; height: 200px; border: 1px solid #000; 
            padding: 20px; margin: 20px 0; background: #fff;
            white-space: pre-wrap; font-size: 18px; overflow-y: auto;
        }
        .controls { display: flex; gap: 10px; align-items: center; }
        button { padding: 12px 24px; cursor: pointer; border: 1px solid #000; background: #fff; font-family: monospace; font-weight: bold; }
        button:hover { background: #000; color: #fff; }
        #finishBtn { display: none; background: #f0f0f0; }
        #results { margin-top: 30px; border-top: 2px solid #000; padding-top: 20px; font-size: 16px; }
        .legal { font-size: 10px; color: #666; margin-top: 50px; }
    </style>
</head>
<body>

    <div class="container">
        <h3>SLER-LAB: MEDICIÓN DE CARGA COGNITIVA Y SALTO SACÁDICO</h3>
        <p>Presione iniciar para comenzar la medición del Test 1.</p>

        <div id="displayBox">Esperando inicio...</div>

        <div class="controls">
            <button id="startBtn" onclick="startTest()">INICIAR TEST 1 (SISTEMA COMÚN)</button>
            <button id="finishBtn" onclick="finishTest()">LISTO / DETENER RELOJ</button>
        </div>

        <div id="results"></div>

        <div class="legal">
            PROPIEDAD INTELECTUAL E INDUSTRIAL REGISTRADA (2025). SISTEMA DE LECTURA Y ESCRITURA RECÍPROCO (SLER).
        </div>
    </div>

<script>
    let startTime, endTime;
    let currentStep = 1;
    let resultsLog = [];

    // Contenido para el testeo (80 caracteres aprox por línea)
    const textComun = "La lectura tradicional implica un salto brusco al final de cada renglón impreso.\nEste movimiento mecánico genera un vacío cognitivo llamado sacada de retorno.\nEl cerebro debe reubicar el foco visual perdiendo milisegundos en cada proceso.\nLa fatiga muscular ciliar aumenta proporcionalmente a la densidad del texto.";

    const textSLER = "La lectura tradicional implica un salto brusco al final de cada renglón- \n-impreso. Este movimiento mecánico genera un vacío cognitivo llamado- \n-sacada de retorno. El cerebro debe reubicar el foco visual perdiendo- \n-milisegundos en cada proceso. La fatiga muscular ciliar aumenta-";

    function startTest() {
        document.getElementById('displayBox').innerText = (currentStep === 1) ? textComun : textSLER;
        document.getElementById('startBtn').style.display = 'none';
        document.getElementById('finishBtn').style.display = 'block';
        startTime = performance.now();
    }

    function finishTest() {
        endTime = performance.now();
        const duration = ((endTime - startTime) / 1000).toFixed(3);
        resultsLog.push(duration);

        const resDiv = document.getElementById('results');
        resDiv.innerHTML += `<div><strong>TEST ${currentStep}:</strong> ${duration} segundos.</div>`;

        if (currentStep === 1) {
            currentStep = 2;
            document.getElementById('displayBox').innerText = "Test 1 completado. Prepare la vista para el Test 2 (Sistema SLER).";
            document.getElementById('startBtn').innerText = "INICIAR TEST 2 (SISTEMA SLER)";
            document.getElementById('startBtn').style.display = 'block';
            document.getElementById('finishBtn').style.display = 'none';
        } else {
            const mejora = (((resultsLog[0] - resultsLog[1]) / resultsLog[0]) * 100).toFixed(1);
            resDiv.innerHTML +=
